{"ast":null,"code":"const actions = {\n  // Busca as marcas\n  fetchBrands({\n    commit\n  }) {\n    console.log(\"busca marcas\");\n    fetch(this.state.apiURL + \"brands\").then(response => response.json()).then(dados => {\n      commit(\"setBrands\", dados.data);\n    });\n  },\n  // Deleta uma marca\n  deleteBrand({\n    commit\n  }, item) {\n    fetch(this.state.apiURL + \"brands/\" + item.id + \"/remove\", {\n      method: \"POST\"\n    }).then(function (response) {\n      if (response.ok) {\n        commit(\"removeBrand\", item.id);\n        // eslint-disable-next-line no-undef\n        Toast.fire(`A marca ${item.name} foi deletada com sucesso.`, \"\", \"success\");\n      } else {\n        // eslint-disable-next-line no-undef\n        Toast.fire(\"Ocorreu um erro ao tentar deletar a marca.\", \"\", \"error\");\n      }\n    }).catch(function (error) {\n      // eslint-disable-next-line no-undef\n      Toast.fire(error.message, \"\", \"error\");\n    });\n  },\n  // Metodo responsável por realizar a inserção de uma nova marca\n  insertBrand({\n    commit\n  }, item) {\n    // eslint-disable-line no-unused-vars\n\n    // Repassa para obj\n    // var list = context.state.listBrands;\n\n    // Processa a api\n    fetch(this.state.apiURL + \"brands/\", {\n      method: \"POST\",\n      body: item\n    }).then(function (response) {\n      if (response.ok) {\n        // Recupera o retorno\n        let data = response.json();\n\n        // data = data.data;\n\n        // console.log(data);\n\n        // // Atualiza a lista\n        // list.push(data);\n\n        //só para parar o erro\n        commit(\"setBrands\", '');\n\n        // eslint-disable-next-line no-undef\n        Toast.fire(`A marca ${item.name} foi inserida com sucesso.`, \"\", \"success\");\n        return data.data;\n      } else {\n        // eslint-disable-next-line no-undef\n        Toast.fire(\"Ocorreu um erro ao tentar inserir a marca.\", \"\", \"error\");\n      }\n    }).catch(function (error) {\n      // eslint-disable-next-line no-undef\n      Toast.fire(error.message, \"\", \"error\");\n    });\n  },\n  // Responsável por alterar os dados de uma marca\n  updateBrand({\n    commit\n  }, {\n    obj,\n    form\n  }) {\n    // Processa a api\n    return fetch(this.state.apiURL + \"brands/\" + obj.id + \"/edit\", {\n      method: \"POST\",\n      body: form\n    }).then(function (response) {\n      if (response.ok) {\n        // Altera na listagem\n        commit(\"updateBrandMutation\", obj);\n\n        // eslint-disable-next-line no-undef\n        Toast.fire(`A marca foi alterada com sucesso.`, \"\", \"success\");\n        return true;\n      } else {\n        // eslint-disable-next-line no-undef\n        Toast.fire(\"Ocorreu um erro ao tentar editar.\", \"\", \"error\");\n        return false;\n      }\n    }).catch(function (error) {\n      // eslint-disable-next-line no-undef\n      Toast.fire(error.message, \"\", \"error\");\n    });\n  }\n};\nexport default actions;","map":{"version":3,"names":["actions","fetchBrands","commit","console","log","fetch","state","apiURL","then","response","json","dados","data","deleteBrand","item","id","method","ok","Toast","fire","name","catch","error","message","insertBrand","body","updateBrand","obj","form"],"sources":["/var/www/html/vue-projects/kanban-vuejs/src/store/modules/brands/actions.js"],"sourcesContent":["const actions = {\n    // Busca as marcas\n    fetchBrands({ commit }) {\n        console.log(\"busca marcas\")\n        fetch(this.state.apiURL + \"brands\")\n            .then(response => response.json())\n            .then(dados => {\n                commit(\"setBrands\", dados.data)\n            })\n    },\n\n    // Deleta uma marca\n    deleteBrand({ commit }, item) {\n        fetch(this.state.apiURL + \"brands/\" + item.id + \"/remove\", { method: \"POST\" })\n            .then(function (response) {\n                if (response.ok) {\n                    commit(\"removeBrand\", item.id)\n                    // eslint-disable-next-line no-undef\n                    Toast.fire(`A marca ${item.name} foi deletada com sucesso.`, \"\", \"success\");\n                } else {\n                    // eslint-disable-next-line no-undef\n                    Toast.fire(\"Ocorreu um erro ao tentar deletar a marca.\", \"\", \"error\");\n                }\n            })\n            .catch(function (error) {\n                // eslint-disable-next-line no-undef\n                Toast.fire(error.message, \"\", \"error\");\n            })\n    },\n\n    // Metodo responsável por realizar a inserção de uma nova marca\n    insertBrand({ commit }, item) {\n        // eslint-disable-line no-unused-vars\n\n        // Repassa para obj\n        // var list = context.state.listBrands;\n\n        // Processa a api\n        fetch(this.state.apiURL + \"brands/\", { method: \"POST\", body: item })\n            .then(function (response) {\n                if (response.ok) {\n                    // Recupera o retorno\n                    let data = response.json();\n\n                    // data = data.data;\n\n                    // console.log(data);\n\n                    // // Atualiza a lista\n                    // list.push(data);\n\n                    //só para parar o erro\n                    commit(\"setBrands\", '')\n\n                    // eslint-disable-next-line no-undef\n                    Toast.fire(`A marca ${item.name} foi inserida com sucesso.`, \"\", \"success\");\n                    return data.data;\n\n                } else {\n                    // eslint-disable-next-line no-undef\n                    Toast.fire(\"Ocorreu um erro ao tentar inserir a marca.\", \"\", \"error\");\n                }\n            })\n            .catch(function (error) {\n                // eslint-disable-next-line no-undef\n                Toast.fire(error.message, \"\", \"error\");\n            })\n    },\n\n    // Responsável por alterar os dados de uma marca\n    updateBrand({commit}, { obj, form }) {\n        // Processa a api\n        return fetch(this.state.apiURL + \"brands/\" + obj.id + \"/edit\", { method: \"POST\", body: form })\n            .then(function (response) {\n                if (response.ok) {\n                    // Altera na listagem\n                    commit(\"updateBrandMutation\", obj);\n\n                    // eslint-disable-next-line no-undef\n                    Toast.fire(`A marca foi alterada com sucesso.`, \"\", \"success\");\n                    return true;\n                } else {\n                    // eslint-disable-next-line no-undef\n                    Toast.fire(\"Ocorreu um erro ao tentar editar.\", \"\", \"error\");\n                    return false;\n                }\n            })\n            .catch(function (error) {\n                // eslint-disable-next-line no-undef\n                Toast.fire(error.message, \"\", \"error\");\n            })\n    }\n}\n\nexport default actions;"],"mappings":"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"},"metadata":{},"sourceType":"module"}